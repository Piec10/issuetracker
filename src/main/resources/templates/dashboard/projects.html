<!DOCTYPE HTML>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

    <link rel="stylesheet" th:href="@{/css/background.css}"/>
    <link rel="stylesheet" th:href="@{/css/home-fade.css}"/>
    <link rel="stylesheet" th:href="@{/css/issues-table.css}"/>

    <title>Issue Tracker | Projects</title>

</head>
<body>
<div th:replace="dashboard/dashboard-navbar :: navbar(dashboard)"></div>

<div class="base-color">

    <div class="container px-4 py-5 min-vh-100">
        <div class="row align-items-center py-5">
            <div class="p-4 p-md-5 border rounded-3 bg-light">

                <div class="container">
                    <div class="row">
                        <div class="col">
                            <div th:unless="${#authorization.expression('hasAuthority(''ROLE_GUEST'')')}">
                                <a class="btn btn-outline-secondary" href="#">New Project</a>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="text-secondary py-2">Your Projects</div>

                <div th:switch="${#lists.isEmpty(user.guestProjects)}">
                    <div th:case="true">
                        <span>You have no projects.</span>
                    </div>
                    <div th:case="false">

                        <div class="row p-2 mx-0 fw-bold">
                            <div class="col">
                                <div class="row">
                                    <div class="col-1">Id</div>
                                    <div class="col">Title</div>
                                    <div class="col-2">Owner</div>
                                    <div class="col-1">Issues</div>
                                    <div class="col-2">Role</div>
                                </div>
                            </div>
                            <div class="col-1"></div>
                        </div>

                <div th:each="tempProject : ${user.guestProjects}">

                    <hr class="hr-table">

                    <div class="row clickable-row p-2 mx-0">
                        <div class="col">
                            <div class="row position-relative">
                            </div>
                        </div>
                    </div>

                </div>


<!--                                <div class="col-1">#<span th:text="${tempIssue.id}"/></div>-->
<!--                                <div class="col"><span th:text="${tempIssue.summary}"/></div>-->

<!--                                <div class="col-1"><span th:text="${priorities.getName(tempIssue.priority)}"/></div>-->

<!--                                <div class="col-2">-->
<!--                                    <div th:switch="${tempIssue.createdBy == null}">-->
<!--                                        <div th:case="true">-->
<!--                                            <small class="text-secondary fst-italic">-->
<!--                                                deleted user-->
<!--                                            </small>-->
<!--                                        </div>-->
<!--                                        <div th:case="false">-->
<!--                                            <span th:text="${tempIssue.createdBy.username}"/>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <small><span th:text="${tempIssue.createdAt}"/></small>-->
<!--                                </div>-->
<!--                                <div class="col-2" th:if="${show == 'closed' or show == 'all'}">-->
<!--                                    <div th:if="${tempIssue.closedAt != null}">-->
<!--                                        <div th:switch="${tempIssue.closedBy == null}">-->
<!--                                            <div th:case="true">-->
<!--                                                <small class="text-secondary fst-italic">-->
<!--                                                    deleted user-->
<!--                                                </small>-->
<!--                                            </div>-->
<!--                                            <div th:case="false">-->
<!--                                                <span th:text="${tempIssue.closedBy.username}"/>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <small><span th:text="${tempIssue.closedAt}"/></small>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <a th:href="@{/dashboard/issue(issueId=${tempIssue.id})}"-->
<!--                                   class="stretched-link"></a>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="col-1">-->
<!--                            <div th:if="${#authorization.expression('hasAuthority(''ROLE_ADMIN'')') or (tempIssue.createdBy != null ? (tempIssue.createdBy.username == #authentication.getPrincipal().getUsername()) : false)}">-->

<!--                                <div class="dropdown">-->
<!--                                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle"-->
<!--                                            type="button" data-bs-toggle="dropdown" aria-expanded="false">-->
<!--                                        Action-->
<!--                                    </button>-->
<!--                                    <ul class="dropdown-menu">-->


<!--                                        <div th:switch="${tempIssue.closedAt == null}">-->
<!--                                            <div th:case="true">-->
<!--                                                <li><a class="dropdown-item"-->
<!--                                                       th:href="@{/dashboard/editIssue(issueId=${tempIssue.id})}">Edit</a>-->
<!--                                                </li>-->
<!--                                                <li><a class="dropdown-item"-->
<!--                                                       th:href="@{/dashboard/closeIssue(issueId=${tempIssue.id})}"-->
<!--                                                       onclick="if (!(confirm('Are you sure you want to close this issue?'))) return false">Close</a>-->
<!--                                                </li>-->
<!--                                            </div>-->
<!--                                            <div th:case="false">-->
<!--                                                <li><a class="dropdown-item"-->
<!--                                                       th:href="@{/dashboard/reopenIssue(issueId=${tempIssue.id})}"-->
<!--                                                       onclick="if (!(confirm('Are you sure you want to reopen this issue?'))) return false">Reopen</a>-->
<!--                                                </li>-->
<!--                                            </div>-->
<!--                                        </div>-->

<!--                                        <li><a class="dropdown-item"-->
<!--                                               th:href="@{/dashboard/deleteIssue(issueId=${tempIssue.id})}"-->
<!--                                               onclick="if (!(confirm('Are you sure you want to delete this issue?'))) return false">Delete</a>-->
<!--                                        </li>-->
<!--                                    </ul>-->
<!--                                </div>-->

<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

</body>
</html>